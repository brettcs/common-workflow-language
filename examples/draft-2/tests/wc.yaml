class: CommandLineTool
label: wc
requirements:
  - class: ExpressionEngineRequirement
    id: "#js"
    expressionCommand: cwl-js-engine
    requirements: {"class": "DockerRequirement", "dockerPull": "rabix/js"}
  - class: DockerRequirement
    dockerPull: ubuntu:latest
inputs:
  - id: "#infile"
    type: File
  - id: "#countLines"
    type:
      type: enum
      name: YesNo
      symbols: [YES, NO]
    inputBinding:
      position: 0
      prefix: -l
      argValue:
        class: Expression
        engine: "#js"
        script: $self=='YES'
outputs:
  - id: "#count"
    type: int
    outputBinding:
      glob: "*.count.txt"
      loadContent: True
      valueFrom:
        class: Expression
        engine: "#js"
        script: parseInt($self.content, 10)
stdin:
  class: Expression
  engine: "#js"
  script: $job.inputs.infile.path
stdout:
  class: Expression
  engine: "#js"
  script: $job.inputs.infile.name.split('.')[0] + '.count.txt'
baseCommand: wc
